<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz Master Pro</title>

<style>
body{
    font-family:Arial;
    margin:0;
    background:#f4f6f9;
}

.container{
    max-width:600px;
    margin:30px auto;
    padding:20px;
    background:white;
    border-radius:12px;
    box-shadow:0 5px 20px rgba(0,0,0,0.1);
}

button{
    width:100%;
    padding:14px;
    margin:8px 0;
    border:none;
    border-radius:6px;
    cursor:pointer;
    font-size:15px;
}

.option{
    background:#e9ecef;
    font-weight:bold;
}

.option:hover{
    background:#ced4da;
}

.correct{background:#28a745 !important;color:white;}
.wrong{background:#dc3545 !important;color:white;}

.next-btn{
    background:#0056ff;
    color:white;
    font-weight:900;
    font-size:16px;
}

.back-btn{
    background:#6c757d;
    color:white;
    font-weight:bold;
}

.home-btn{
    background:#ff9800;
    color:white;
    font-weight:bold;
}

input{
    width:100%;
    padding:12px;
    margin:8px 0;
    border-radius:6px;
    border:1px solid #ccc;
    font-size:15px;
}

.top-bar{
    display:flex;
    justify-content:space-between;
    font-weight:bold;
}

.progress-bar{
    height:8px;
    background:#ddd;
    border-radius:5px;
    margin:10px 0;
}

.progress-fill{
    height:8px;
    background:#28a745;
    width:0%;
    border-radius:5px;
    transition:0.3s;
}
</style>
</head>

<body>

<div class="container" id="app">
<h2>Quiz Master Pro</h2>
<h3>Select Number of Questions</h3>

<button onclick="startQuiz(5)">5 Questions</button>
<button onclick="startQuiz(10)">10 Questions</button>
<button onclick="startQuiz(15)">15 Questions</button>

<h3>Or Enter Custom Number</h3>
<input type="number" id="customNumber" placeholder="Enter number (max 300)">
<button onclick="startCustomQuiz()">Start Custom Quiz</button>
</div>

<script>

// ====== GENERATE 300 MCQs ======
const questionBank=[];
for(let i=1;i<=300;i++){
    questionBank.push({
        q:"Medical Question "+i+"?",
        o:["Option A","Option B","Option C","Option D"],
        a:3
    });
}

let quiz=[];
let current=0;
let score=0;
let timer;
let timeLeft=15;
let questionLimit=10;
let answered=false;

// ===== CUSTOM QUIZ =====
function startCustomQuiz(){
    let num=parseInt(document.getElementById("customNumber").value);

    if(isNaN(num) || num<=0){
        alert("Please enter valid number");
        return;
    }

    if(num>300){
        alert("Maximum 300 questions allowed");
        return;
    }

    startQuiz(num);
}

// ===== START QUIZ =====
function startQuiz(limit){
    questionLimit=limit;
    quiz=shuffle([...questionBank]).slice(0,questionLimit);
    current=0;
    score=0;

    document.getElementById("app").innerHTML=`
    <div class="top-bar">
        <div>Score: <span id="score">0</span></div>
        <div>Time: <span id="timer">15</span>s</div>
    </div>
    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
    <h3 id="question"></h3>
    <div id="options"></div>

    <button class="next-btn" onclick="nextQuestion()">NEXT ‚ûú</button>
    <button class="back-btn" onclick="goBack()">‚¨Ö BACK</button>
    <button class="home-btn" onclick="goHome()">üè† HOME</button>
    `;
    loadQuestion();
}

// ===== LOAD QUESTION =====
function loadQuestion(){
    answered=false;
    timeLeft=15;
    document.getElementById("timer").innerText=timeLeft;
    startTimer();
    updateProgress();

    const q=quiz[current];
    document.getElementById("question").innerText=q.q;

    const optDiv=document.getElementById("options");
    optDiv.innerHTML="";
    q.o.forEach((opt,i)=>{
        const btn=document.createElement("button");
        btn.innerText=opt;
        btn.classList.add("option");
        btn.onclick=()=>selectAnswer(i,btn);
        optDiv.appendChild(btn);
    });
}

// ===== SELECT ANSWER =====
function selectAnswer(index,btn){
    if(answered) return;
    answered=true;
    clearInterval(timer);

    const correctIndex=quiz[current].a;
    const buttons=document.querySelectorAll(".option");
    buttons[correctIndex].classList.add("correct");

    if(index===correctIndex){
        score++;
        document.getElementById("score").innerText=score;
    }else{
        if(btn) btn.classList.add("wrong");
    }
}

// ===== NEXT =====
function nextQuestion(){
    clearInterval(timer);
    current++;
    if(current<quiz.length){
        loadQuestion();
    }else{
        showResult();
    }
}

// ===== BACK =====
function goBack(){
    if(current>0){
        current--;
        loadQuestion();
    }
}

// ===== HOME =====
function goHome(){
    location.reload();
}

// ===== RESULT =====
function showResult(){
    let percentage=Math.round((score/quiz.length)*100);

    document.getElementById("app").innerHTML=`
    <h2>Quiz Finished üéâ</h2>
    <h3>Your Score: ${score} / ${quiz.length}</h3>
    <h3>Percentage: ${percentage}%</h3>
    <button class="home-btn" onclick="goHome()">üè† Back To Home</button>
    `;
}

// ===== TIMER =====
function startTimer(){
    timer=setInterval(()=>{
        timeLeft--;
        document.getElementById("timer").innerText=timeLeft;
        if(timeLeft<=0){
            clearInterval(timer);
            selectAnswer(-1,null);
        }
    },1000);
}

// ===== PROGRESS =====
function updateProgress(){
    let percent=((current)/quiz.length)*100;
    document.getElementById("progressFill").style.width=percent+"%";
}

// ===== SHUFFLE =====
function shuffle(array){
    for(let i=array.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [array[i],array[j]]=[array[j],array[i]];
    }
    return array;
}

</script>
</body>
</html>
